<!DOCTYPE html>
<html lang="<?= $this->language ?>">
<head>

    <meta charset="<?= $this->charset ?>">
    <title><?= $this->title ?> - Contao Open Source CMS <?= VERSION ?></title>
    <base href="<?= $this->base ?>">
    <meta name="generator" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <meta name="referrer" content="origin">

    <link rel="stylesheet" href="<?= TL_ASSETS_URL ?>system/themes/<?= $this->theme ?>/login.css">
    <?= $this->stylesheets ?>

    <script><?= $this->getLocaleString() ?></script>
    <script src="<?php
    $objCombiner = new Combiner();
    $objCombiner->add('assets/mootools/core/' . $GLOBALS['TL_ASSETS']['MOOTOOLS'] . '/mootools.js', $GLOBALS['TL_ASSETS']['MOOTOOLS']);
    $objCombiner->add('assets/mootools/mootao/Mootao.js');
    $objCombiner->add('assets/contao/js/core.js');
    echo $objCombiner->getCombinedFile();
    ?>"></script>
    <script><?= $this->getDateString() ?></script>
    <?= $this->javascripts ?>

</head>
<body class="<?= $this->ua ?>">

<noscript></noscript>

<!--[if lte IE 9]>
<div id="ie6warning"><?= $this->ie6warning ?></div>
<![endif]-->

<div id="container">

    <div id="main">
        <h2><?= $this->headline ?></h2>

        <form action="<?= $this->action ?>" class="tl_login_form" method="post">
            <div class="formbody">
                <input type="hidden" name="FORM_SUBMIT" value="tl_login">
                <input type="hidden" name="REQUEST_TOKEN" value="<?= REQUEST_TOKEN ?>">
                <?= $this->messages ?>
                <?php if ($this->noCookies): ?>
                    <p class="tl_error"><?= $this->noCookies ?></p>
                <?php endif; ?>
                <table class="tl_login_table">
                    <tr>
                        <td<?= $this->uClass ?>><label for="username"><?= $this->username ?></label></td>
                        <td style="text-align:right"><input type="text" name="username" id="username" class="tl_text"
                                                            value="<?= $this->curUsername ?>" autocapitalize="off"
                                                            required></td>
                    </tr>
                    <tr>
                        <td<?= $this->pClass ?>><label for="password"><?= $this->password ?></label></td>
                        <td style="text-align:right"><input type="password" name="password" id="password"
                                                            class="tl_text" value="" required></td>
                    </tr>
                </table>
                <div class="tl_login_submit_container">
                    <input type="submit" name="login" id="login" class="tl_submit" value="<?= $this->loginButton ?>">
                </div>
            </div>
        </form>
        <p id="go_to_frontend"><a href="<?= $this->frontendFile ?>" class="footer_preview"
                                  title="<?= $this->feLink ?>"><?= $this->feLink ?></a></p>
    </div>
</div>

<script>
    window.addEvent('domready', function () {
        if (parent.frames[0] && parent.frames[0].name == 'switch') {
            parent.location.reload();
        }
        $('username').focus();
    });
</script>

<?php if (!$this->disableCron): ?>
    <script>
        new Request({
            url: 'system/cron/cron.txt',
            onComplete: function (txt) {
                if (!txt) txt = 0;
                if (parseInt(txt) < (Date.now() / 1000 - 300)) {
                    new Request({url: 'system/cron/cron.php'}).send();
                }
            }
        }).send();
    </script>
<?php endif; ?>

</body>
</html>